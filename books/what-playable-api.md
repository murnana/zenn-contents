---
title: "Playable API"
---

カスタマイズするにも、何らかの問題を修正するにも、まずTimelineがどのように動作するのかを知っていただく必要があります。

その為に、最初にPlayable APIについて説明します。
## Playable API とは
Playable APIは、例えばアニメーションと効果音をプログラミングでコントロールしたいときに役立つAPIです。実は Unity 5.4から[^1]ひっそりと登場しています。

特徴的なのは木構造で、例えば親が速度を2倍とすれば、その子につながったものも2倍速になる、といったことができます。子だけが2倍速で、親は1倍速のままにする、ということもできます。

また、制御できるのはAnimatorに限りません。 `ScriptPlayableBehaviour` などを使えば、Playable APIで動作するものを実装できます。


### Playable API を使う利点
従来からある Animator は、独自にステートマシンを持っていました。この仕組みはMecanimと呼ばれます。

この仕組みは便利ですが、用途によっては冗長なものでした(あるいは、足りないと感じる場合もありました)。例えば、UIのボタンを押下した際の、ボタンのアニメーションにも、このシステムに沿って作成する必要がありました。

またMecanimの設定ファイルである、AnimationControllerはよく肥大化していました。これは、予めAnimationController上で設定しておいたアニメーションのみ再生が可能、というのがあるためです。追加で特定のアニメーションデータを再生したい場合、プログラムで動的に特定のアニメーションデータを読み込み、再生するのではなく、予めAnimationControllerに使用する全てのアニメーションデータを追加しておく必要がありました。

Playable APIはアニメーションの全てをプログラムで制御する必要がありますが、その分自由度が高いです。動的にアニメーションデータを追加する仕組みもできますし、アニメーションの再生時間を見ながら、特定の条件で音を鳴らす仕組みなども作れます。


[^1]: [Unleashing Animation and Audio | Unity Blog](https://blog.unity.com/technology/unleashing-animation-and-audio-2) より
